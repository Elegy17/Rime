--[[
--æ— éšœç¢ç‰ˆä¸“ç”¨è„šæœ¬
--ç”¨é€”ï¼šæœ‰é“ç¿»è¯‘ï¼Œå¤šå›½è¯­è¨€äº’è¯‘,å¯ç¿»è¯‘ã€å½“å‰å€™é€‰ã€‘,ã€ç¼–è¾‘æ¡†é€‰ä¸­æ–‡å­—ã€‘åŠã€ç¼–ç ã€‘,ç¿»è¯‘å†…å®¹åœ¨æ‚¬æµ®çª—å£æ˜¾ç¤º
--è¯´æ˜: ã€ç¼–ç ã€‘ç¿»è¯‘æ¨¡å¼åªæ”¯æŒå°†ç¼–ç è½¬æˆè‹±æ–‡,åç¿»è¯‘ä¸ºä¸­æ–‡,é»˜è®¤å°†åˆ†éš”ç¬¦è½¬æ¢ä¸ºç©ºæ ¼.ç›®å‰åˆ†éš”ç¬¦åªæ”¯æŒ',å…¶å®ƒå¾…ä¼˜åŒ–
--ç‰ˆæœ¬å·: 1.0
--åˆ¶ä½œæ—¥æœŸ
â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–‚
æ—¥æœŸ: 2020å¹´03æœˆ07æ—¥ğŸ—“ï¸
å†œå†: é¼ (åºšå­)å¹´äºŒæœˆåå››
æ—¶é—´: 21:27:01ğŸ•˜
æ˜ŸæœŸ: å‘¨å…­
--åˆ¶ä½œè€…: é£ä¹‹æ¼«èˆ
--é¦–å‘qqç¾¤: åŒæ–‡å ‚(480159874)
--é‚®ç®±: bj19490007@163.com(ä¸ä¸€å®šåŠæ—¶çœ‹åˆ°)
--ç›®å‰æ”¯æŒä»¥ä¸‹è¯­ç§é—´çš„è½¬æ¢
typeçš„ç±»å‹æœ‰ï¼š
AUTO è‡ªåŠ¨è¯†åˆ«å†…å®¹å¹¶ç¿»è¯‘
ZH_CN2EN ä¸­æ–‡ã€€Â»ã€€è‹±è¯­
ZH_CN2JA ä¸­æ–‡ã€€Â»ã€€æ—¥è¯­
ZH_CN2KR ä¸­æ–‡ã€€Â»ã€€éŸ©è¯­
ZH_CN2FR ä¸­æ–‡ã€€Â»ã€€æ³•è¯­
ZH_CN2RU ä¸­æ–‡ã€€Â»ã€€ä¿„è¯­
ZH_CN2SP ä¸­æ–‡ã€€Â»ã€€è¥¿è¯­
EN2ZH_CN è‹±è¯­ã€€Â»ã€€ä¸­æ–‡
JA2ZH_CN æ—¥è¯­ã€€Â»ã€€ä¸­æ–‡
KR2ZH_CN éŸ©è¯­ã€€Â»ã€€ä¸­æ–‡
FR2ZH_CN æ³•è¯­ã€€Â»ã€€ä¸­æ–‡
RU2ZH_CN ä¿„è¯­ã€€Â»ã€€ä¸­æ–‡
SP2ZH_CN è¥¿è¯­ã€€Â»ã€€ä¸­æ–‡


--å¦‚ä½•å®‰è£…å¹¶ä½¿ç”¨: è¯·å‚è€ƒç¾¤æ–‡ä»¶ï¼Œè·¯å¾„[åŒæ–‡æ— éšœç¢LUAè„šæœ¬]->åŒæ–‡æ— éšœç¢ç‰ˆluaè„šæœ¬ä½¿ç”¨è¯´æ˜.pdf

--é…ç½®è¯´æ˜
ç¬¬â‘ æ­¥ å°† æœ‰é“ç¿»è¯‘.lua æ–‡ä»¶æ”¾ç½® rime/script æ–‡ä»¶å¤¹å†…

ç¬¬â‘¡æ­¥ å‘ä¸»é¢˜æ–¹æ¡ˆä¸­åŠ å…¥æŒ‰é”®
ä»¥ XXX.trime.yamlä¸»é¢˜æ–¹æ¡ˆä¸ºä¾‹
æ‰¾åˆ°ä»¥ä¸‹èŠ‚ç‚¹preset_keysï¼ŒåŠ å…¥ä»¥ä¸‹æŒ‰é”®

preset_keys:
  #æœ‰é“ç¿»è¯‘,å°†ã€å½“å‰å€™é€‰ã€‘,ã€ç¼–è¾‘æ¡†é€‰ä¸­æ–‡å­—ã€‘çš„ä¸­æ–‡å†…å®¹è½¬å…¶å®ƒè¯­ç§
  youdao_1: {label: ç¿»è¯‘, send: function, command: 'æœ‰é“ç¿»è¯‘.lua', option: "%1$s<ZH_CN2EN>"} #ä¸­æ–‡Â»è‹±è¯­
  youdao_2: {label: ç¿»è¯‘, send: function, command: 'æœ‰é“ç¿»è¯‘.lua', option: "%1$s<ZH_CN2JA>"} #ä¸­æ–‡Â»æ—¥è¯­
  youdao_3: {label: ç¿»è¯‘, send: function, command: 'æœ‰é“ç¿»è¯‘.lua', option: "%1$s<ZH_CN2KR>"} #ä¸­æ–‡Â»éŸ©è¯­
  youdao_4: {label: ç¿»è¯‘, send: function, command: 'æœ‰é“ç¿»è¯‘.lua', option: "%1$s<ZH_CN2FR>"} #ä¸­æ–‡Â»æ³•è¯­
  youdao_5: {label: ç¿»è¯‘, send: function, command: 'æœ‰é“ç¿»è¯‘.lua', option: "%1$s<ZH_CN2RU>"} #ä¸­æ–‡Â»ä¿„è¯­
  youdao_6: {label: ç¿»è¯‘, send: function, command: 'æœ‰é“ç¿»è¯‘.lua', option: "%1$s<ZH_CN2SP>"} #ä¸­æ–‡Â»è¥¿è¯­

 #æœ‰é“ç¿»è¯‘,å°†ã€å½“å‰å€™é€‰ã€‘,ã€ç¼–è¾‘æ¡†é€‰ä¸­æ–‡å­—ã€‘å†…å®¹ç¿»è¯‘ä¸ºä¸­æ–‡,å¦‚è‹±è¯­å•è¯åŠå¥å­
  youdao_7: {label: ç¿»è¯‘, send: function, command: 'æœ‰é“ç¿»è¯‘.lua', option: "%1$s<EN2ZH_CN>"} #è‹±è¯­Â»ä¸­æ–‡
  youdao_8: {label: ç¿»è¯‘, send: function, command: 'æœ‰é“ç¿»è¯‘.lua', option: "%1$s<JA2ZH_CN>"} #æ—¥è¯­Â»ä¸­æ–‡
  youdao_9: {label: ç¿»è¯‘, send: function, command: 'æœ‰é“ç¿»è¯‘.lua', option: "%1$s<KR2ZH_CN>"} #éŸ©è¯­Â»ä¸­æ–‡
  youdao_10: {label: ç¿»è¯‘, send: function, command: 'æœ‰é“ç¿»è¯‘.lua', option: "%1$s<FR2ZH_CN>"} #æ³•è¯­Â»ä¸­æ–‡
  youdao_11: {label: ç¿»è¯‘, send: function, command: 'æœ‰é“ç¿»è¯‘.lua', option: "%1$s<RU2ZH_CN>"} #ä¿„è¯­Â»ä¸­æ–‡
  youdao_12: {label: ç¿»è¯‘, send: function, command: 'æœ‰é“ç¿»è¯‘.lua', option: "%1$s<SP2ZH_CN>"} #è¥¿è¯­Â»ä¸­æ–‡

 #æœ‰é“ç¿»è¯‘,å°†ã€ç¼–ç ã€‘è½¬æ¢ä¸ºè‹±è¯­å•è¯åŠå¥å­,å…¶ä¸­åˆ†éš”ç¬¦å¦‚'è½¬æ¢ä¸ºç©ºæ ¼,ç¿»è¯‘æˆä¸­æ–‡,
  youdao_13: {label: ç¿»è¯‘, send: function, command: 'æœ‰é“ç¿»è¯‘.lua', option: "%2$s<EN2ZH_CN>"} #ç¼–ç Â»è‹±è¯­Â»ä¸­æ–‡

å‘è¯¥æ–¹æ¡ˆä»»æ„æŒ‰é”®åŠ å…¥ä¸Šè¿°æŒ‰é”®æ—¢å¯
]]

require "import"
import "android.widget.*"
import "android.view.*"
import "java.io.*"
import "cjson"
import "android.content.Context" 


local å€™é€‰ = (...)
local å®é™…å†…å®¹=å€™é€‰
local ç¿»è¯‘ç±»å‹="AUTO"

if string.sub(å€™é€‰,1,1)!="<" && string.sub(å€™é€‰,#å€™é€‰-9,#å€™é€‰-9)=="<" && string.sub(å€™é€‰,#å€™é€‰,#å€™é€‰)==">" then
 å®é™…å†…å®¹=string.sub(å€™é€‰,1,#å€™é€‰-10)
 å®é™…å†…å®¹=string.gsub(å®é™…å†…å®¹,"'"," ")
 å®é™…å†…å®¹=string.gsub(å®é™…å†…å®¹,"%.","")
 ç¿»è¯‘ç±»å‹=string.sub(å€™é€‰,#å€™é€‰-8,#å€™é€‰-1)
end

--Toast.makeText(service, ç¿»è¯‘ç±»å‹,Toast.LENGTH_SHORT).show() --å¼¹å‡ºä¿¡æ¯

local äº‘è¾“å…¥å†…å®¹="http://fanyi.youdao.com/translate?&doctype=json&type="..ç¿»è¯‘ç±»å‹.."&i="..å®é™…å†…å®¹

Http.get(äº‘è¾“å…¥å†…å®¹,nil,"utf8",nil,function(a,b)
 if a==200 then 
 json=import"cjson"
 jx=json.decode(b)
 local ç¿»è¯‘å†…å®¹=jx.translateResult[1][1].tgt
 local å†…å®¹1=ç¿»è¯‘å†…å®¹..".("..å®é™…å†…å®¹..")"
 task(300,function()
  service.addCompositions({å®é™…å†…å®¹,å†…å®¹1}) end)
 else
 print("ç½‘ç»œä¼¼ä¹å‡ºäº†é—®é¢˜")
 end
 end)




